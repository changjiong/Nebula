# Unified Agent Portal è®¾è®¡è§„èŒƒï¼ˆç²¾ç®€ç‰ˆï¼‰

## 1. å¹³å°å®šä½

**æ ¸å¿ƒèŒè´£**ï¼šç¼–æ’å±‚ + æ ‡å‡†åŒ–å±‚ + äº¤äº’å±‚

| åšä»€ä¹ˆ | ä¸åšä»€ä¹ˆ |
|--------|---------|
| âœ… å®šä¹‰ä¸šåŠ¡ Agent çš„è¾“å…¥è¾“å‡ºè§„èŒƒ | âŒ æ•°æ®å­˜å‚¨å’Œè®¡ç®— |
| âœ… æä¾›è‡ªç„¶è¯­è¨€äº¤äº’å…¥å£ | âŒ æ¨¡å‹è®­ç»ƒå’Œæ¨ç† |
| âœ… ç¼–æ’è°ƒåº¦å¤–éƒ¨æœåŠ¡ | âŒ ETL åŠ å·¥ |
| âœ… æ€ç»´é“¾å¯è§†åŒ– + ç»“æœæ¸²æŸ“ | âŒ é‡è®¡ç®—å¼•æ“ |

---

## 2. åˆ†å±‚æ¶æ„è®¾è®¡

### 2.1 æ•´ä½“æ¶æ„å›¾

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                      Unified Agent Portalï¼ˆç»Ÿä¸€æ™ºèƒ½äº¤äº’å…¥å£ï¼‰                â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                              â”‚
â”‚  â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•—  â”‚
â”‚  â•‘                     é€šç”¨ Agent èƒ½åŠ›å±‚ (æ¨ªå‘èƒ½åŠ›)                       â•‘  â”‚
â”‚  â• â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•£  â”‚
â”‚  â•‘                                                                        â•‘  â”‚
â”‚  â•‘  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â•‘  â”‚
â”‚  â•‘  â”‚  Planner    â”‚  â”‚  Executor   â”‚  â”‚  Validator  â”‚  â”‚   Memory    â”‚  â•‘  â”‚
â”‚  â•‘  â”‚  è§„åˆ’å±‚     â”‚  â”‚  æ‰§è¡Œå±‚     â”‚  â”‚  éªŒè¯å±‚     â”‚  â”‚   è®°å¿†å±‚    â”‚  â•‘  â”‚
â”‚  â•‘  â”‚             â”‚  â”‚             â”‚  â”‚             â”‚  â”‚             â”‚  â•‘  â”‚
â”‚  â•‘  â”‚ â€¢ æ„å›¾ç†è§£  â”‚  â”‚ â€¢ DAG è°ƒåº¦  â”‚  â”‚ â€¢ é€»è¾‘æ ¡éªŒ  â”‚  â”‚ â€¢ ä¼šè¯ä¸Šä¸‹æ–‡â”‚  â•‘  â”‚
â”‚  â•‘  â”‚ â€¢ ä»»åŠ¡åˆ†è§£  â”‚  â”‚ â€¢ å¹¶è¡Œæ‰§è¡Œ  â”‚  â”‚ â€¢ äº‹å®æ ¸æŸ¥  â”‚  â”‚ â€¢ ç”¨æˆ·ç”»åƒ  â”‚  â•‘  â”‚
â”‚  â•‘  â”‚ â€¢ æ¨¡å¼åˆ‡æ¢  â”‚  â”‚ â€¢ æµå¼è¾“å‡º  â”‚  â”‚ â€¢ åˆè§„å®¡æŸ¥  â”‚  â”‚ â€¢ ä»»åŠ¡æ¨¡å¼  â”‚  â•‘  â”‚
â”‚  â•‘  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â•‘  â”‚
â”‚  â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•  â”‚
â”‚                                      â†“ è°ƒç”¨/ç¼–æ’/éªŒè¯                        â”‚
â”‚  â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•—  â”‚
â”‚  â•‘                     ä¸šåŠ¡ Agent å¥‘çº¦å±‚ï¼ˆä½ çš„æ ¸å¿ƒèµ„äº§ï¼‰                  â•‘  â”‚
â”‚  â• â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•£  â”‚
â”‚  â•‘  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â” â•‘  â”‚
â”‚  â•‘  â”‚ ä¼ä¸šä¸»ä½“  â”‚ â”‚ ç§‘åˆ›è¯„ä»·  â”‚ â”‚ äº¤æ˜“å¯¹æ‰‹  â”‚ â”‚ å®¢æˆ·ä»·å€¼  â”‚ â”‚ å¾ä¿¡    â”‚ â•‘  â”‚
â”‚  â•‘  â”‚ è¯†åˆ« Agentâ”‚ â”‚   Agent   â”‚ â”‚ æŒ–æ˜ Agentâ”‚ â”‚ è¯„ä¼° Agentâ”‚ â”‚è¯„åˆ†Agentâ”‚ â•‘  â”‚
â”‚  â•‘  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â•‘  â”‚
â”‚  â•‘        æ¯ä¸ª Agent å°è£…: è¾“å…¥è¾“å‡ºè§„èŒƒ + æœåŠ¡è°ƒç”¨é…ç½® + å‰ç«¯ç»„ä»¶        â•‘  â”‚
â”‚  â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•  â”‚
â”‚                                      â†“ è°ƒç”¨å¤–éƒ¨æœåŠ¡                          â”‚
â”‚  â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•—  â”‚
â”‚  â•‘                     å¤–éƒ¨æœåŠ¡å±‚ï¼ˆè®¡ç®—åœ¨å¤–éƒ¨å¹³å°ï¼‰                       â•‘  â”‚
â”‚  â• â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•£  â”‚
â”‚  â•‘  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â•‘  â”‚
â”‚  â•‘  â”‚  æ•°ä»“ API   â”‚  â”‚  æ¨¡å‹å·¥å‚   â”‚  â”‚  å¤–éƒ¨æ•°æ®   â”‚  â”‚  ä¸šåŠ¡ç³»ç»Ÿ   â”‚  â•‘  â”‚
â”‚  â•‘  â”‚             â”‚  â”‚             â”‚  â”‚  (å·¥å•†ç­‰)   â”‚  â”‚  (å¯é€‰)     â”‚  â•‘  â”‚
â”‚  â•‘  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â•‘  â”‚
â”‚  â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•  â”‚
â”‚                                                                              â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### 2.2 é€šç”¨èƒ½åŠ›å±‚è¯¦è§£

| å±‚ | èŒè´£ | å€Ÿé‰´æ¥æº | å®ç°æ–¹å¼ |
|----|------|---------|---------|
| **Planner (è§„åˆ’å±‚)** | æ„å›¾ç†è§£ã€Agent è·¯ç”±ã€å‚æ•°æå–ã€ä»»åŠ¡åˆ†è§£ | JoyAgent | LangGraph èŠ‚ç‚¹ |
| **Executor (æ‰§è¡Œå±‚)** | è°ƒåº¦ä¸šåŠ¡ Agentã€å¹¶è¡Œæ‰§è¡Œã€æµå¼è¾“å‡º | Manus | LangGraph DAG |
| **Validator (éªŒè¯å±‚)** | ç»“æœæ ¡éªŒã€åˆè§„æ£€æŸ¥ã€å¼‚å¸¸å¤„ç† | Manus | LLM + è§„åˆ™ |
| **Memory (è®°å¿†å±‚)** | ä¼šè¯ä¸Šä¸‹æ–‡ã€ç”¨æˆ·åå¥½ã€ç›¸ä¼¼ä»»åŠ¡å¤ç”¨ | ä¸¤è€… | Redis + DB |

### 2.3 è¿è¡Œæ—¶æµç¨‹

```
ç”¨æˆ·è¾“å…¥ â†’ Planner(æ„å›¾+è·¯ç”±) â†’ Executor(è°ƒåº¦Agent) 
                                       â†“
        â† æµå¼äº‹ä»¶ â† Validator(æ ¡éªŒ) â† ä¸šåŠ¡Agent(è°ƒç”¨å¤–éƒ¨æœåŠ¡)
                                       â†“
                               Memory(è®°å½•å­¦ä¹ )
```

---

## 3. ç»Ÿä¸€æœåŠ¡è°ƒç”¨åè®®

### 3.1 æ•°æ®æœåŠ¡è°ƒç”¨åè®®

```yaml
# é€šç”¨è¯·æ±‚æ ¼å¼
request:
  service_type: "data_warehouse" | "model_factory" | "external_api"
  service_id: "string"           # æœåŠ¡æ ‡è¯†
  method: "query" | "execute"    # æŸ¥è¯¢æˆ–æ‰§è¡Œ
  params: {}                     # ä¸šåŠ¡å‚æ•°
  timeout_ms: 30000              # è¶…æ—¶æ—¶é—´
  async: false                   # æ˜¯å¦å¼‚æ­¥

# é€šç”¨å“åº”æ ¼å¼
response:
  success: boolean
  request_id: "string"
  data: {}                       # è¿”å›çš„ç»“æœæ•°æ®ï¼ˆå·²è®¡ç®—å¥½çš„ï¼‰
  error:
    code: "string"
    message: "string"
  metadata:
    execution_time_ms: number
    source: "string"             # æ•°æ®æ¥æºæ ‡è¯†
```

### 3.2 æœåŠ¡é€‚é…å™¨æ¥å£

```python
class ServiceAdapter(Protocol):
    """å¤–éƒ¨æœåŠ¡é€‚é…å™¨ç»Ÿä¸€æ¥å£"""
    
    async def call(
        self,
        service_id: str,
        params: dict,
        timeout_ms: int = 30000,
    ) -> ServiceResponse:
        """åŒæ­¥è°ƒç”¨"""
        ...
    
    async def submit(
        self,
        service_id: str,
        params: dict,
        callback_url: str | None = None,
    ) -> TaskHandle:
        """å¼‚æ­¥æäº¤ä»»åŠ¡"""
        ...
    
    async def poll(
        self,
        task_id: str,
    ) -> TaskStatus:
        """è½®è¯¢ä»»åŠ¡çŠ¶æ€"""
        ...


# å…·ä½“é€‚é…å™¨å®ç°
class DataWarehouseAdapter(ServiceAdapter):
    """æ•°ä»“ API é€‚é…å™¨"""
    base_url: str
    auth_token: str

class ModelFactoryAdapter(ServiceAdapter):
    """æ¨¡å‹å·¥å‚é€‚é…å™¨"""
    base_url: str
    
class ExternalAPIAdapter(ServiceAdapter):
    """å¤–éƒ¨æ•°æ® API é€‚é…å™¨"""
    ...
```

---

## 4. å®æ—¶æŸ¥è¯¢ vs æ‰¹é‡ä»»åŠ¡

### 4.1 ä¸¤ç§æ¨¡å¼å¯¹æ¯”

| æ¨¡å¼ | è§¦å‘æ–¹å¼ | å“åº”æ–¹å¼ | é€‚ç”¨åœºæ™¯ |
|------|---------|---------|---------|
| **å®æ—¶æŸ¥è¯¢** | ç”¨æˆ·å¯¹è¯è§¦å‘ | SSE æµå¼è¿”å› | ä¼ä¸šä¸»ä½“è¯†åˆ«ã€å•å®¢æˆ·è¯„åˆ† |
| **æ‰¹é‡ä»»åŠ¡** | ç”¨æˆ·å¯¹è¯è§¦å‘ | æäº¤ä»»åŠ¡ â†’ è½®è¯¢/å›è°ƒ | ç™½åå•å»ºæ¨¡ã€æ‰¹é‡è¯„åˆ† |

### 4.2 Agent å®šä¹‰ä¸­çš„æ¨¡å¼å£°æ˜

```yaml
agent:
  id: "kechuang_whitelist"
  name: "ç§‘åˆ›è´·ç™½åå•å»ºæ¨¡"
  
  # æ‰§è¡Œæ¨¡å¼
  execution_mode: "batch"  # realtime | batch | auto
  
  # æ‰¹é‡ä»»åŠ¡é…ç½®
  batch_config:
    estimated_duration_minutes: 30
    result_storage: "oss://agent-results/{task_id}/"
    notification:
      type: "webhook"
      url: "/api/agent/callback"
```

### 4.3 æ‰¹é‡ä»»åŠ¡æµç¨‹

```
ç”¨æˆ·: "å¸®æˆ‘ç”Ÿæˆè‹å·ç§‘åˆ›ä¼ä¸šç™½åå•"
                â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  Planner è¯†åˆ«ï¼šè¿™æ˜¯æ‰¹é‡ä»»åŠ¡ï¼Œé¢„è®¡è€—æ—¶ 30 åˆ†é’Ÿ           â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  å‘ç”¨æˆ·ç¡®è®¤ï¼š                                           â”‚
â”‚  "è¯¥ä»»åŠ¡é¢„è®¡éœ€è¦ 30 åˆ†é’Ÿï¼Œæ˜¯å¦ç¡®è®¤æäº¤ï¼Ÿ"               â”‚
â”‚  [ç¡®è®¤æäº¤] [å–æ¶ˆ]                                      â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                â†“ ç”¨æˆ·ç¡®è®¤
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  æäº¤ä»»åŠ¡åˆ°åç«¯å¹³å°                                     â”‚
â”‚  è¿”å› task_idï¼Œè¿›å…¥è½®è¯¢/ç­‰å¾…å›è°ƒ                        â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  å‰ç«¯å±•ç¤ºï¼š                                             â”‚
â”‚  "ä»»åŠ¡å·²æäº¤ï¼Œä»»åŠ¡ID: xxx"                              â”‚
â”‚  [æŸ¥çœ‹è¿›åº¦] [å‰å¾€ä»»åŠ¡ä¸­å¿ƒ]                              â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## 5. Agent ç®¡ç†è®¾è®¡

### 5.1 æ¶æ„

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”      â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  ç®¡ç†ç•Œé¢ UI  â”‚ â”€â”€â”€â–¶ â”‚   ç®¡ç† API    â”‚
â”‚  (å‰ç«¯)       â”‚      â”‚   (åç«¯)      â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜      â””â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”˜
                               â”‚
                    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                    â†“                     â†“
            â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”       â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
            â”‚  æ•°æ®åº“     â”‚       â”‚ YAML æ–‡ä»¶   â”‚
            â”‚  (ä¸»å­˜å‚¨)   â”‚  åŒæ­¥  â”‚ (å¯¼å‡ºå¤‡ä»½)  â”‚
            â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜       â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### 5.2 Agent æ•°æ®æ¨¡å‹

```python
class AgentDefinition(BaseModel):
    """Agent å®šä¹‰"""
    id: str                          # å”¯ä¸€æ ‡è¯†
    name: str                        # æ˜¾ç¤ºåç§°
    description: str                 # æè¿°
    category: str                    # åˆ†ç±»ï¼šè¥é”€æ‹“å®¢/é£é™©è¯„ä¼°/...
    version: str                     # ç‰ˆæœ¬å·
    status: Literal["draft", "active", "deprecated"]
    
    # è¾“å…¥å‚æ•°å®šä¹‰
    inputs: list[InputParam]
    
    # è¾“å‡ºç»“æ„å®šä¹‰
    outputs: OutputSchema
    
    # å¤–éƒ¨æœåŠ¡è°ƒç”¨é…ç½®
    service_calls: list[ServiceCall]
    
    # æ‰§è¡Œé…ç½®
    execution_mode: Literal["realtime", "batch", "auto"]
    batch_config: BatchConfig | None
    
    # å‰ç«¯æ¸²æŸ“
    output_component: str            # ç»„ä»¶ç±»å‹
    
    # å…ƒæ•°æ®
    created_at: datetime
    updated_at: datetime
    created_by: str


class InputParam(BaseModel):
    name: str
    type: Literal["string", "number", "boolean", "array", "object"]
    description: str
    required: bool = False
    default: Any | None = None
    enum: list[Any] | None = None   # å¯é€‰å€¼æšä¸¾


class OutputSchema(BaseModel):
    json_schema: dict                # JSON Schema å®šä¹‰
    sample: dict | None = None       # ç¤ºä¾‹æ•°æ®


class ServiceCall(BaseModel):
    name: str                        # è°ƒç”¨æ­¥éª¤åç§°
    service_type: Literal["data_warehouse", "model_factory", "external_api"]
    service_id: str                  # æœåŠ¡æ ‡è¯†
    params_mapping: dict[str, str]   # å‚æ•°æ˜ å°„ï¼ˆæ”¯æŒè¡¨è¾¾å¼ï¼‰
    result_mapping: str | None       # ç»“æœæ˜ å°„åˆ°è¾“å‡ºå­—æ®µ
```

### 5.3 ç®¡ç†ç•Œé¢åŠŸèƒ½

| åŠŸèƒ½ | è¯´æ˜ |
|------|-----|
| **Agent åˆ—è¡¨** | æŸ¥çœ‹æ‰€æœ‰ Agentï¼ŒæŒ‰åˆ†ç±»ç­›é€‰ |
| **Agent è¯¦æƒ…** | æŸ¥çœ‹/ç¼–è¾‘ Agent å®šä¹‰ |
| **åˆ›å»º Agent** | å¯è§†åŒ–è¡¨å• + JSON ç¼–è¾‘å™¨ |
| **ç‰ˆæœ¬ç®¡ç†** | ç‰ˆæœ¬å†å²ã€å›æ»š |
| **å¯¼å…¥/å¯¼å‡º** | YAML æ ¼å¼å¯¼å…¥å¯¼å‡º |
| **æµ‹è¯•è°ƒç”¨** | åœ¨ç®¡ç†ç•Œé¢æµ‹è¯• Agent |
| **è°ƒç”¨ç»Ÿè®¡** | è°ƒç”¨æ¬¡æ•°ã€æˆåŠŸç‡ã€è€—æ—¶ |

---

## 6. ç”¨æˆ·ç«¯ç•Œé¢è®¾è®¡ï¼ˆå‚è€ƒ Manusï¼‰

### 6.1 æ•´ä½“å¸ƒå±€ï¼ˆä¸¤æ å¼ï¼‰

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                    â”‚                                                          â”‚
â”‚   ğŸ“‚ å·¦ä¾§å¯¼èˆª       â”‚                    ğŸ’¬ ä¸»å¯¹è¯/æ‰§è¡ŒåŒº                       â”‚
â”‚   (220px, å¯æŠ˜å )   â”‚                                                          â”‚
â”‚                    â”‚                                                          â”‚
â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚ â”‚ â• æ–°å»ºå¯¹è¯    â”‚ â”‚  â”‚                                                  â”‚   â”‚
â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚  â”‚      ğŸ¤– æ‚¨å¥½ï¼Œæˆ‘æ˜¯å¯¹å…¬ä¸šåŠ¡æ™ºèƒ½åŠ©æ‰‹                â”‚   â”‚
â”‚                    â”‚  â”‚         æˆ‘èƒ½ä¸ºæ‚¨åšä»€ä¹ˆï¼Ÿ                          â”‚   â”‚
â”‚ ğŸ” æœç´¢å†å²        â”‚  â”‚                                                  â”‚   â”‚
â”‚                    â”‚  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”â”‚   â”‚
â”‚ â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”  â”‚  â”‚  â”‚ ğŸ¢      â”‚ â”‚ ğŸ“Š      â”‚ â”‚ ğŸ’°      â”‚ â”‚ ğŸ”—      â”‚â”‚   â”‚
â”‚ ğŸ“‹ æˆ‘çš„ Agent      â”‚  â”‚  â”‚ä¼ä¸šè¯†åˆ« â”‚ â”‚ç§‘åˆ›è¯„ä»· â”‚ â”‚å®¢æˆ·ä»·å€¼ â”‚ â”‚äº¤æ˜“å¯¹æ‰‹ â”‚â”‚   â”‚
â”‚   â€¢ ä¼ä¸šä¸»ä½“è¯†åˆ«   â”‚  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜â”‚   â”‚
â”‚   â€¢ ç§‘åˆ›è¯„ä»·       â”‚  â”‚              [æŸ¥çœ‹æ›´å¤š Agent...]                 â”‚   â”‚
â”‚   â€¢ å®¢æˆ·ä»·å€¼è¯„ä¼°   â”‚  â”‚                                                  â”‚   â”‚
â”‚   â€¢ äº¤æ˜“å¯¹æ‰‹æŒ–æ˜   â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â”‚   â€¢ ä¾›åº”é“¾é‡‘è     â”‚                                                          â”‚
â”‚                    â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚ â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”  â”‚  â”‚  ğŸ’¬ è¾“å…¥æ‚¨çš„é—®é¢˜...                              â”‚   â”‚
â”‚ ğŸ“œ å†å²å¯¹è¯        â”‚  â”‚                                       [å‘é€ â†©]   â”‚   â”‚
â”‚   ğŸ• å…ˆè¿›æ•°é€šæŸ¥è¯¢  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â”‚   ğŸ• ç§‘åˆ›ç™½åå•    â”‚                                                          â”‚
â”‚   ğŸ• å®¢æˆ·ä»·å€¼åˆ†æ  â”‚                                                          â”‚
â”‚                    â”‚                                                          â”‚
â”‚ â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”  â”‚                                                          â”‚
â”‚ ğŸ‘¤ ç”¨æˆ· / âš™ï¸ è®¾ç½®  â”‚                                                          â”‚
â”‚ ğŸŒ™/â˜€ï¸ ä¸»é¢˜åˆ‡æ¢     â”‚                                                          â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### 6.2 ä»»åŠ¡æ‰§è¡Œæµå¼å±•ç¤ºï¼ˆæ ¸å¿ƒä½“éªŒï¼‰

å‚è€ƒ Manus çš„ä»»åŠ¡æ‰§è¡Œå±•ç¤ºï¼Œåœ¨å¯¹è¯åŒºå®æ—¶å‘ˆç°ï¼š

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  ğŸ’¬ å¯¹è¯åŒº                                                                   â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                               â”‚
â”‚  ğŸ‘¤ ç”¨æˆ·ï¼šå¸®æˆ‘æŸ¥ä¸€ä¸‹å…ˆè¿›æ•°é€šçš„åŸºæœ¬ä¿¡æ¯å’Œå…³è”ä¼ä¸š                             â”‚
â”‚                                                                               â”‚
â”‚  ğŸ¤– åŠ©æ‰‹ï¼š                                                                    â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”     â”‚
â”‚  â”‚  ğŸ“‹ ä»»åŠ¡è¿›åº¦                                              [2/4]    â”‚     â”‚
â”‚  â”‚  â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”           â”‚     â”‚
â”‚  â”‚  âœ… ç†è§£ç”¨æˆ·æ„å›¾ï¼Œè¯†åˆ«ä¸ºä¼ä¸šæŸ¥è¯¢                                   â”‚     â”‚
â”‚  â”‚  âœ… æ£€ç´¢ä¼ä¸šä¸»ä½“ä¿¡æ¯                                               â”‚     â”‚
â”‚  â”‚  ğŸ”„ æ­£åœ¨æŸ¥è¯¢å…³è”ä¼ä¸š...                                            â”‚     â”‚
â”‚  â”‚  â—‹  ç”Ÿæˆåˆ†ææŠ¥å‘Š                                                   â”‚     â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜     â”‚
â”‚                                                                               â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”     â”‚
â”‚  â”‚  ğŸ” æ‰§è¡Œè¯¦æƒ…                                           [å±•å¼€/æ”¶èµ·] â”‚     â”‚
â”‚  â”‚  â”œâ”€ âœ… æ­£åœ¨æŸ¥è¯¢å·¥å•†æ•°æ®...                                         â”‚     â”‚
â”‚  â”‚  â”‚     â†’ è°ƒç”¨æœåŠ¡ï¼šenterprise_search                               â”‚     â”‚
â”‚  â”‚  â”‚     â†’ å‚æ•°ï¼š{ query: "å…ˆè¿›æ•°é€š" }                               â”‚     â”‚
â”‚  â”‚  â”‚     â†’ ç»“æœï¼šæ‰¾åˆ° 1 æ¡åŒ¹é…                                       â”‚     â”‚
â”‚  â”‚  â”œâ”€ ğŸ”„ æ­£åœ¨æŸ¥è¯¢å…³è”ä¼ä¸š...                                         â”‚     â”‚
â”‚  â”‚  â”‚     â†’ è°ƒç”¨æœåŠ¡ï¼šrelation_graph                                  â”‚     â”‚
â”‚  â”‚  â”‚     â†’ å‚æ•°ï¼š{ credit_code: "91110000..." }                      â”‚     â”‚
â”‚  â”‚  â””â”€ â—‹  å¾…æ‰§è¡Œï¼šç”ŸæˆæŠ¥å‘Š                                            â”‚     â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜     â”‚
â”‚                                                                               â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”     â”‚
â”‚  â”‚  ğŸ¢ ä¼ä¸šä¿¡æ¯å¡ç‰‡                                                   â”‚     â”‚
â”‚  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚     â”‚
â”‚  â”‚  â”‚  å…ˆè¿›æ•°é€šä¿¡æ¯æŠ€æœ¯è‚¡ä»½æœ‰é™å…¬å¸                               â”‚   â”‚     â”‚
â”‚  â”‚  â”‚  ç»Ÿä¸€ç¤¾ä¼šä¿¡ç”¨ä»£ç ï¼š91110000XXXXXXXX                         â”‚   â”‚     â”‚
â”‚  â”‚  â”‚  æ³•å®šä»£è¡¨äººï¼šXXX       æ³¨å†Œèµ„æœ¬ï¼š50,000ä¸‡                   â”‚   â”‚     â”‚
â”‚  â”‚  â”‚                                                             â”‚   â”‚     â”‚
â”‚  â”‚  â”‚  [ä¸€é”®å¸¦å…¥]  [æŸ¥çœ‹è¯¦æƒ…]  [è‚¡æƒç©¿é€]                         â”‚   â”‚     â”‚
â”‚  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚     â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜     â”‚
â”‚                                                                               â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”     â”‚
â”‚  â”‚  ğŸ”— å…³è”ä¼ä¸šå›¾è°±                                    (åŠ è½½ä¸­...)    â”‚     â”‚
â”‚  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚     â”‚
â”‚  â”‚  â”‚                    [æ¯å…¬å¸]                                 â”‚   â”‚     â”‚
â”‚  â”‚  â”‚                        â”‚                                    â”‚   â”‚     â”‚
â”‚  â”‚  â”‚               â”Œâ”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”                            â”‚   â”‚     â”‚
â”‚  â”‚  â”‚               â”‚       â”‚       â”‚                             â”‚   â”‚     â”‚
â”‚  â”‚  â”‚          [å…ˆè¿›æ•°é€š] [å…„å¼ŸA] [å…„å¼ŸB]                         â”‚   â”‚     â”‚
â”‚  â”‚  â”‚               â”‚                                             â”‚   â”‚     â”‚
â”‚  â”‚  â”‚          â”Œâ”€â”€â”€â”€â”¼â”€â”€â”€â”€â”                                       â”‚   â”‚     â”‚
â”‚  â”‚  â”‚          â”‚    â”‚    â”‚                                        â”‚   â”‚     â”‚
â”‚  â”‚  â”‚       [å­1] [å­2] [å­3]                                     â”‚   â”‚     â”‚
â”‚  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚     â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜     â”‚
â”‚                                                                               â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### 6.3 å·¦ä¾§è¾¹æ è®¾è®¡

| åŒºåŸŸ | åŠŸèƒ½ | è¯´æ˜ |
|------|------|------|
| **æ–°å»ºå¯¹è¯** | å¼€å§‹æ–°å¯¹è¯ | é¡¶éƒ¨æŒ‰é’® |
| **æœç´¢** | æœç´¢å†å²å¯¹è¯ | å¿«é€Ÿå®šä½ |
| **æˆ‘çš„ Agent** | ç”¨æˆ·å¯ç”¨çš„ Agent åˆ—è¡¨ | æ ¹æ®æƒé™å±•ç¤º |
| **å†å²å¯¹è¯** | å†å²å¯¹è¯è®°å½• | æŒ‰æ—¶é—´æ’åº |
| **ç”¨æˆ·/è®¾ç½®** | ä¸ªäººä¿¡æ¯ã€ç³»ç»Ÿè®¾ç½® | åº•éƒ¨ |
| **ä¸»é¢˜åˆ‡æ¢** | æ·±è‰²/æµ…è‰²æ¨¡å¼ | ä¸€é”®åˆ‡æ¢ |

### 6.4 Agent å¡ç‰‡è®¾è®¡

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  Agent å¿«æ·å…¥å£ï¼ˆå¡ç‰‡å½¢å¼ï¼‰                                          â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                      â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”              â”‚
â”‚  â”‚     ğŸ¢       â”‚  â”‚     ğŸ“Š       â”‚  â”‚     ğŸ’°       â”‚              â”‚
â”‚  â”‚   ä¼ä¸šè¯†åˆ«   â”‚  â”‚   ç§‘åˆ›è¯„ä»·   â”‚  â”‚   å®¢æˆ·ä»·å€¼   â”‚              â”‚
â”‚  â”‚              â”‚  â”‚              â”‚  â”‚              â”‚              â”‚
â”‚  â”‚  å¿«é€Ÿè¯†åˆ«    â”‚  â”‚  äº”ç»´è¯„åˆ†    â”‚  â”‚  ä»·å€¼è¯„ä¼°    â”‚              â”‚
â”‚  â”‚  ä¼ä¸šä¸»ä½“    â”‚  â”‚  ç²¾å‡†å®šä½    â”‚  â”‚  ç²¾å‡†è¥é”€    â”‚              â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜              â”‚
â”‚                                                                      â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”              â”‚
â”‚  â”‚     ğŸ”—       â”‚  â”‚     ğŸ“ˆ       â”‚  â”‚     â•       â”‚              â”‚
â”‚  â”‚  äº¤æ˜“å¯¹æ‰‹    â”‚  â”‚  ä¾›åº”é“¾é‡‘è  â”‚  â”‚              â”‚              â”‚
â”‚  â”‚              â”‚  â”‚              â”‚  â”‚   æŸ¥çœ‹æ›´å¤š   â”‚              â”‚
â”‚  â”‚  æŒ–æ˜ä¸Šä¸‹æ¸¸  â”‚  â”‚  é“¾å¼æ‹“å®¢    â”‚  â”‚   ...        â”‚              â”‚
â”‚  â”‚  é«˜æ½œå®¢æˆ·    â”‚  â”‚  ç²¾å‡†è¥é”€    â”‚  â”‚              â”‚              â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜              â”‚
â”‚                                                                      â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### 6.5 åé—®æ¨¡å¼äº¤äº’

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                                                                      â”‚
â”‚  ğŸ¤– åŠ©æ‰‹ï¼š                                                           â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”     â”‚
â”‚  â”‚  âš ï¸ å‘ç°å¤šä¸ªåŒ¹é…é¡¹ï¼Œè¯·ç¡®è®¤æ‚¨è¦æŸ¥è¯¢çš„ä¼ä¸šï¼š                  â”‚     â”‚
â”‚  â”‚                                                             â”‚     â”‚
â”‚  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚     â”‚
â”‚  â”‚  â”‚  â—‹  åä¸ºæŠ€æœ¯æœ‰é™å…¬å¸                                  â”‚  â”‚     â”‚
â”‚  â”‚  â”‚      æ·±åœ³å¸‚é¾™å²—åŒº | æ³¨å†Œèµ„æœ¬ 4,043,868ä¸‡              â”‚  â”‚     â”‚
â”‚  â”‚  â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤  â”‚     â”‚
â”‚  â”‚  â”‚  â—‹  åä¸ºæŠ•èµ„æ§è‚¡æœ‰é™å…¬å¸                              â”‚  â”‚     â”‚
â”‚  â”‚  â”‚      æ·±åœ³å¸‚å—å±±åŒº | æ³¨å†Œèµ„æœ¬ 4,000,000ä¸‡              â”‚  â”‚     â”‚
â”‚  â”‚  â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤  â”‚     â”‚
â”‚  â”‚  â”‚  â—‹  åä¸ºç»ˆç«¯æœ‰é™å…¬å¸                                  â”‚  â”‚     â”‚
â”‚  â”‚  â”‚      ä¸œèå¸‚æ¾å±±æ¹– | æ³¨å†Œèµ„æœ¬ 500,000ä¸‡                â”‚  â”‚     â”‚
â”‚  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚     â”‚
â”‚  â”‚                                                             â”‚     â”‚
â”‚  â”‚                                    [é€‰æ‹©åç»§ç»­]             â”‚     â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜     â”‚
â”‚                                                                      â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## 7. å‰ç«¯æµå¼äº‹ä»¶åè®®

```typescript
// SSE äº‹ä»¶ç±»å‹
type AgentEvent = 
  | { type: "thinking"; data: { step: string; detail?: string } }
  | { type: "service_call"; data: { name: string; status: "calling" | "success" | "error" } }
  | { type: "progress"; data: { percent: number; message: string } }
  | { type: "clarification"; data: { question: string; options: Option[] } }
  | { type: "component"; data: { component_type: string; props: any } }
  | { type: "batch_submitted"; data: { task_id: string; estimated_minutes: number } }
  | { type: "done"; data: { success: boolean } }
  | { type: "error"; data: { code: string; message: string } }
```

---

## 8. å¤–éƒ¨æœåŠ¡ API ç¤ºä¾‹

### 8.1 æ•°ä»“ API ç¤ºä¾‹

```yaml
# è¯·æ±‚ç¤ºä¾‹ï¼šæŸ¥è¯¢ç§‘åˆ›ä¼ä¸šå€™é€‰åå•
POST /api/datawarehouse/query
Headers:
  Authorization: Bearer {token}
  X-Request-ID: {uuid}

Request:
  service_id: "kechuang_candidates"
  params:
    region: "è‹å·å¸‚"
    industry: "è½¯ä»¶å’Œä¿¡æ¯æŠ€æœ¯æœåŠ¡ä¸š"
    min_tax_credit: "A"
    limit: 500

Response:
  success: true
  request_id: "uuid-xxx"
  data:
    total: 328
    items:
      - enterprise_name: "è‹å·æŸæŸç§‘æŠ€æœ‰é™å…¬å¸"
        credit_code: "91320500XXXXXXXX"
        region: "è‹å·å¸‚å´ä¸­åŒº"
        industry: "è½¯ä»¶å’Œä¿¡æ¯æŠ€æœ¯æœåŠ¡ä¸š"
        tax_credit: "A"
        registered_capital: 5000
        established_date: "2018-03-15"
      - ...æ›´å¤šè®°å½•
  metadata:
    execution_time_ms: 1250
    source: "enterprise_dw.kechuang_view"
    data_update_time: "2026-01-12T00:00:00Z"
```

### 8.2 æ¨¡å‹å·¥å‚ API ç¤ºä¾‹

```yaml
# è¯·æ±‚ç¤ºä¾‹ï¼šè°ƒç”¨ç§‘åˆ›è¯„åˆ†æ¨¡å‹
POST /api/model-factory/invoke
Headers:
  Authorization: Bearer {token}

Request:
  model_id: "kechuang_score_v2"
  version: "latest"
  params:
    candidates:
      - credit_code: "91320500XXXXXXXX"
        features:
          patent_count: 15
          revenue_growth: 0.25
          rd_investment_ratio: 0.08
      - ...æ›´å¤šå€™é€‰
    scoring_weights:        # å¯é€‰ï¼Œä½¿ç”¨é»˜è®¤æƒé‡
      innovation: 0.3
      growth: 0.25
      stability: 0.25
      cooperation: 0.2

Response:
  success: true
  model_id: "kechuang_score_v2"
  model_version: "2.1.3"
  data:
    scored_items:
      - credit_code: "91320500XXXXXXXX"
        total_score: 85.5
        score_breakdown:
          innovation: 90
          growth: 82
          stability: 88
          cooperation: 78
        rank: 1
      - ...æ›´å¤šç»“æœ
  metadata:
    execution_time_ms: 3200
    model_inference_time_ms: 2800
```

### 8.3 æ‰¹é‡ä»»åŠ¡ API ç¤ºä¾‹

```yaml
# æäº¤æ‰¹é‡ä»»åŠ¡
POST /api/model-factory/submit
Request:
  model_id: "kechuang_whitelist_batch"
  params: {...}
  callback_url: "https://agent-portal/api/callback"

Response:
  success: true
  task_id: "task-uuid-xxx"
  estimated_duration_minutes: 30
  status: "submitted"

# è½®è¯¢ä»»åŠ¡çŠ¶æ€
GET /api/model-factory/tasks/{task_id}

Response:
  task_id: "task-uuid-xxx"
  status: "running" | "completed" | "failed"
  progress: 65
  result_url: "oss://results/task-uuid-xxx/output.json"  # å®Œæˆå
```

---

## 9. å‰ç«¯ç»„ä»¶ç±»å‹

### 9.1 ç»„ä»¶åˆ†ç±»

| ç±»å‹ | ç»„ä»¶å | é€‚ç”¨åœºæ™¯ | ç¤ºä¾‹ |
|------|-------|---------|------|
| **æ–‡æœ¬ç±»** | `text_message` | æ™®é€šæ–‡å­—å›å¤ | "å·²ä¸ºæ‚¨æ‰¾åˆ°328å®¶ä¼ä¸š" |
| | `markdown_content` | å¯Œæ–‡æœ¬ã€æŠ¥å‘Š | åˆ†ææŠ¥å‘Šã€è¯´æ˜æ–‡æ¡£ |
| **å¡ç‰‡ç±»** | `entity_card` | å•ä¸ªä¼ä¸šä¿¡æ¯ | ä¼ä¸šä¸»ä½“è¯†åˆ«ç»“æœ |
| | `customer_card` | å®¢æˆ·ä¿¡æ¯å¡ç‰‡ | å®¢æˆ·ä»·å€¼è¯„ä¼°ç»“æœ |
| | `score_card` | è¯„åˆ†å±•ç¤º | ç§‘åˆ›è¯„åˆ†ã€ä¿¡ç”¨è¯„åˆ† |
| | `summary_card` | æ‘˜è¦å¡ç‰‡ | ä»»åŠ¡æ‰§è¡Œæ‘˜è¦ |
| **è¡¨æ ¼ç±»** | `data_table` | æ•°æ®åˆ—è¡¨ | ç™½åå•ã€å€™é€‰å®¢æˆ·åˆ—è¡¨ |
| | `comparison_table` | å¯¹æ¯”è¡¨æ ¼ | å¤šæ–¹æ¡ˆå¯¹æ¯” |
| **å›¾è¡¨ç±»** | `bar_chart` | æŸ±çŠ¶å›¾ | éƒ¨é—¨ä¸šç»©å¯¹æ¯” |
| | `line_chart` | æŠ˜çº¿å›¾ | è¶‹åŠ¿åˆ†æ |
| | `pie_chart` | é¥¼å›¾ | å æ¯”åˆ†æ |
| | `radar_chart` | é›·è¾¾å›¾ | å¤šç»´è¯„åˆ†å±•ç¤º |
| | `sankey_chart` | æ¡‘åŸºå›¾ | èµ„é‡‘æµå‘ |
| **å…³ç³»ç±»** | `relation_graph` | å…³ç³»å›¾è°± | ä¼ä¸šå…³è”å…³ç³» |
| | `tree_view` | æ ‘çŠ¶ç»“æ„ | è‚¡æƒç©¿é€ |
| **äº¤äº’ç±»** | `candidate_list` | å€™é€‰é€‰æ‹© | åé—®æ¨¡å¼çš„é€‰é¡¹ |
| | `form_input` | è¡¨å•è¾“å…¥ | è¡¥å……å‚æ•° |
| | `action_buttons` | æ“ä½œæŒ‰é’® | ä¸€é”®å¸¦å…¥ã€å¯¼å‡ºExcel |

### 9.2 ç»„ä»¶æ¸²æŸ“åè®®

```typescript
interface ComponentPayload {
  component_type: string;       // ç»„ä»¶ç±»å‹
  title?: string;               // æ ‡é¢˜
  props: {
    data: any;                  // ç»„ä»¶æ•°æ®
    config?: any;               // é…ç½®é¡¹ï¼ˆåˆ—å®šä¹‰ã€å›¾è¡¨é…ç½®ç­‰ï¼‰
  };
  actions?: Array<{             // å¯é€‰æ“ä½œæŒ‰é’®
    type: string;               // inject_to_system | export | navigate
    label: string;
    params?: any;
  }>;
}

// ç¤ºä¾‹ï¼šä¼ä¸šä¿¡æ¯å¡ç‰‡
{
  component_type: "entity_card",
  title: "è¯†åˆ«ç»“æœ",
  props: {
    data: {
      name: "å…ˆè¿›æ•°é€šä¿¡æ¯æŠ€æœ¯è‚¡ä»½æœ‰é™å…¬å¸",
      credit_code: "91110000XXXXXXXX",
      legal_person: "å¼ ä¸‰",
      registered_capital: "5000ä¸‡",
      status: "å­˜ç»­"
    }
  },
  actions: [
    { type: "inject_to_system", label: "ä¸€é”®å¸¦å…¥", params: { target: "crm" } },
    { type: "navigate", label: "æŸ¥çœ‹è¯¦æƒ…", params: { url: "/entity/xxx" } }
  ]
}

// ç¤ºä¾‹ï¼šæ•°æ®è¡¨æ ¼
{
  component_type: "data_table",
  title: "ç§‘åˆ›ä¼ä¸šç™½åå•ï¼ˆå…±328å®¶ï¼‰",
  props: {
    data: [...],
    config: {
      columns: [
        { key: "name", title: "ä¼ä¸šåç§°", width: 200 },
        { key: "score", title: "ç»¼åˆè¯„åˆ†", width: 100, sortable: true },
        { key: "region", title: "åœ°åŒº", width: 120 }
      ],
      pagination: { pageSize: 20 },
      exportable: true
    }
  },
  actions: [
    { type: "export", label: "å¯¼å‡ºExcel", params: { format: "xlsx" } }
  ]
}
```

---

## 10. æƒé™æ§åˆ¶è®¾è®¡

### 10.1 æƒé™æ¨¡å‹

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                          æƒé™æ§åˆ¶æ¨¡å‹                                â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                      â”‚
â”‚  ç”¨æˆ· â”€â”€belongs toâ”€â”€â–¶ éƒ¨é—¨ â”€â”€has roleâ”€â”€â–¶ è§’è‰²                       â”‚
â”‚                          â”‚                  â”‚                        â”‚
â”‚                          â–¼                  â–¼                        â”‚
â”‚                     éƒ¨é—¨å¯è§ Agent      è§’è‰²å¯ç”¨ Agent               â”‚
â”‚                          â”‚                  â”‚                        â”‚
â”‚                          â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                        â”‚
â”‚                                   â–¼                                  â”‚
â”‚                          ç”¨æˆ·æœ€ç»ˆå¯ç”¨ Agent = äº¤é›†/å¹¶é›†              â”‚
â”‚                                                                      â”‚
â”‚  Agent å±æ€§:                                                         â”‚
â”‚  â”œâ”€â”€ visibility: "public" | "department" | "role"                   â”‚
â”‚  â”œâ”€â”€ allowed_departments: ["å…¬å¸é‡‘èéƒ¨", "é£æ§éƒ¨", ...]             â”‚
â”‚  â””â”€â”€ allowed_roles: ["analyst", "manager", "admin"]                 â”‚
â”‚                                                                      â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### 10.2 Agent æƒé™é…ç½®

```yaml
agent:
  id: "kechuang_whitelist"
  name: "ç§‘åˆ›è´·ç™½åå•å»ºæ¨¡"
  
  # æƒé™é…ç½®
  permissions:
    visibility: "department"          # public | department | role
    allowed_departments:
      - "å…¬å¸é‡‘èéƒ¨"
      - "ç§‘æŠ€é‡‘èéƒ¨"
    allowed_roles:
      - "analyst"
      - "manager"
    
    # æ•°æ®æƒé™ï¼ˆå¯é€‰ï¼Œæ§åˆ¶èƒ½æŸ¥è¯¢çš„æ•°æ®èŒƒå›´ï¼‰
    data_scope:
      type: "department"              # all | department | self
      field: "branch_code"            # æŒ‰å“ªä¸ªå­—æ®µè¿‡æ»¤
```

### 10.3 æƒé™æ§åˆ¶å»ºè®®

| æ–¹æ¡ˆ | è¯´æ˜ | é€‚ç”¨åœºæ™¯ |
|------|------|---------|
| **æ–¹æ¡ˆA: æ¾è€¦åˆ** | Agent åªæ ‡è®°"å»ºè®®éƒ¨é—¨"ï¼Œå®é™…ä¸åšæ‹¦æˆª | åˆæœŸè¯•ç‚¹ï¼Œå¿«é€Ÿä¸Šçº¿ |
| **æ–¹æ¡ˆB: éƒ¨é—¨æ§åˆ¶** | æŒ‰éƒ¨é—¨å½’å±æ§åˆ¶ï¼ŒåŒéƒ¨é—¨å¯è§ | ä¸­ç­‰å®‰å…¨è¦æ±‚ |
| **æ–¹æ¡ˆC: è§’è‰²æ§åˆ¶** | æŒ‰è§’è‰²ç²¾ç»†æ§åˆ¶ï¼ˆåˆ†æå¸ˆ/ç»ç†/ç®¡ç†å‘˜ï¼‰ | é«˜å®‰å…¨è¦æ±‚ |
| **æ–¹æ¡ˆD: ç»„åˆæ§åˆ¶** | éƒ¨é—¨ + è§’è‰²åŒé‡æ ¡éªŒ | é“¶è¡Œçº§å®‰å…¨è¦æ±‚ |

**å»ºè®®**ï¼šåˆæœŸé‡‡ç”¨**æ–¹æ¡ˆBï¼ˆéƒ¨é—¨æ§åˆ¶ï¼‰**ï¼Œå¿«é€Ÿä¸Šçº¿éªŒè¯ï¼›åæœŸå¯å‡çº§ä¸ºæ–¹æ¡ˆDã€‚

### 10.4 å®ç°æ–¹å¼

```python
class AgentPermission(BaseModel):
    visibility: Literal["public", "department", "role"]
    allowed_departments: list[str] = []
    allowed_roles: list[str] = []

def check_agent_permission(user: User, agent: AgentDefinition) -> bool:
    """æ£€æŸ¥ç”¨æˆ·æ˜¯å¦æœ‰æƒé™ä½¿ç”¨è¯¥ Agent"""
    perm = agent.permissions
    
    if perm.visibility == "public":
        return True
    
    if perm.visibility == "department":
        return user.department in perm.allowed_departments
    
    if perm.visibility == "role":
        return any(role in perm.allowed_roles for role in user.roles)
    
    return False
```

---

## 11. å®æ–½è·¯çº¿å›¾

### Phase 1: æ ¸å¿ƒæ¡†æ¶ (2å‘¨)

- [ ] Agent ç®¡ç†åç«¯ API (CRUD)
- [ ] Agent ç®¡ç†å‰ç«¯ç•Œé¢
- [ ] ç”¨æˆ·ç«¯å¯¹è¯ç•Œé¢ï¼ˆManus é£æ ¼ï¼‰
- [ ] LLM ç¼–æ’å±‚ (LangGraph)
- [ ] æœåŠ¡é€‚é…å™¨æ¡†æ¶

### Phase 2: äº¤äº’èƒ½åŠ› (2å‘¨)

- [ ] SSE æµå¼é€šä¿¡
- [ ] æ€ç»´é“¾å¯è§†åŒ–ç»„ä»¶
- [ ] åŠ¨æ€ç»„ä»¶æ¸²æŸ“å™¨ï¼ˆæ”¯æŒ10+ç»„ä»¶ç±»å‹ï¼‰
- [ ] ä»»åŠ¡æµå¼å±•ç¤º
- [ ] åé—®æ¨¡å¼

### Phase 3: ä¸šåŠ¡è½åœ° (2å‘¨)

- [ ] å¯¹æ¥æ•°ä»“ API
- [ ] å¯¹æ¥æ¨¡å‹å·¥å‚
- [ ] ç¬¬ä¸€æ‰¹ä¸šåŠ¡ Agent é…ç½®ï¼ˆ3-5ä¸ªï¼‰
- [ ] æ‰¹é‡ä»»åŠ¡æ”¯æŒ
- [ ] éƒ¨é—¨çº§æƒé™æ§åˆ¶

---

## 12. é¡¹ç›®ç»“æ„è®¾è®¡

### 12.1 ç›®æ ‡é¡¹ç›®ç»“æ„ï¼ˆç²¾ç®€ç‰ˆï¼‰

```
unified-agent-portal/
â”œâ”€â”€ README.md
â”œâ”€â”€ docker-compose.yml
â”œâ”€â”€ .env
â”‚
â”œâ”€â”€ backend/                           # FastAPI åç«¯
â”‚   â”œâ”€â”€ app/
â”‚   â”‚   â”œâ”€â”€ __init__.py
â”‚   â”‚   â”œâ”€â”€ main.py                    # FastAPI å…¥å£
â”‚   â”‚   â”‚
â”‚   â”‚   â”œâ”€â”€ core/                      # æ ¸å¿ƒé…ç½®ï¼ˆä¿ç•™ï¼‰
â”‚   â”‚   â”‚   â”œâ”€â”€ config.py              # ç¯å¢ƒé…ç½®
â”‚   â”‚   â”‚   â”œâ”€â”€ db.py                  # æ•°æ®åº“è¿æ¥
â”‚   â”‚   â”‚   â””â”€â”€ security.py            # è®¤è¯é‰´æƒ
â”‚   â”‚   â”‚
â”‚   â”‚   â”œâ”€â”€ api/                       # API è·¯ç”±
â”‚   â”‚   â”‚   â”œâ”€â”€ main.py                # è·¯ç”±æ³¨å†Œ
â”‚   â”‚   â”‚   â”œâ”€â”€ deps.py                # ä¾èµ–æ³¨å…¥
â”‚   â”‚   â”‚   â””â”€â”€ routes/
â”‚   â”‚   â”‚       â”œâ”€â”€ auth.py            # è®¤è¯ï¼ˆç®€åŒ–è‡ª login.pyï¼‰
â”‚   â”‚   â”‚       â”œâ”€â”€ users.py           # ç”¨æˆ·ç®¡ç†ï¼ˆä¿ç•™ï¼‰
â”‚   â”‚   â”‚       â”œâ”€â”€ agents.py          # ğŸ†• Agent ç®¡ç† CRUD
â”‚   â”‚   â”‚       â”œâ”€â”€ chat.py            # ğŸ†• å¯¹è¯ + SSE æµå¼
â”‚   â”‚   â”‚       â””â”€â”€ tasks.py           # ğŸ†• æ‰¹é‡ä»»åŠ¡ç®¡ç†
â”‚   â”‚   â”‚
â”‚   â”‚   â”œâ”€â”€ models/                    # æ•°æ®æ¨¡å‹
â”‚   â”‚   â”‚   â”œâ”€â”€ user.py                # ç”¨æˆ·æ¨¡å‹ï¼ˆä¿ç•™ï¼‰
â”‚   â”‚   â”‚   â”œâ”€â”€ agent.py               # ğŸ†• Agent å®šä¹‰æ¨¡å‹
â”‚   â”‚   â”‚   â”œâ”€â”€ conversation.py        # ğŸ†• å¯¹è¯/æ¶ˆæ¯æ¨¡å‹
â”‚   â”‚   â”‚   â””â”€â”€ task.py                # ğŸ†• æ‰¹é‡ä»»åŠ¡æ¨¡å‹
â”‚   â”‚   â”‚
â”‚   â”‚   â”œâ”€â”€ engine/                    # ğŸ†• LangGraph å¼•æ“ï¼ˆå€Ÿé‰´ Manus/JoyAgentï¼‰
â”‚   â”‚   â”‚   â”œâ”€â”€ __init__.py
â”‚   â”‚   â”‚   â”œâ”€â”€ planner.py             # è§„åˆ’å±‚ï¼šæ„å›¾ç†è§£ã€Agent è·¯ç”±
â”‚   â”‚   â”‚   â”œâ”€â”€ executor.py            # æ‰§è¡Œå±‚ï¼šDAG è°ƒåº¦ã€æœåŠ¡è°ƒç”¨
â”‚   â”‚   â”‚   â”œâ”€â”€ validator.py           # éªŒè¯å±‚ï¼šç»“æœæ ¡éªŒ
â”‚   â”‚   â”‚   â”œâ”€â”€ memory.py              # è®°å¿†å±‚ï¼šä¸Šä¸‹æ–‡ç®¡ç†
â”‚   â”‚   â”‚   â””â”€â”€ graph.py               # LangGraph å›¾å®šä¹‰
â”‚   â”‚   â”‚
â”‚   â”‚   â”œâ”€â”€ agents/                    # ğŸ†• ä¸šåŠ¡ Agent å®šä¹‰
â”‚   â”‚   â”‚   â”œâ”€â”€ __init__.py            # Agent è‡ªåŠ¨å‘ç°æ³¨å†Œ
â”‚   â”‚   â”‚   â”œâ”€â”€ base.py                # Agent åŸºç±»
â”‚   â”‚   â”‚   â”œâ”€â”€ registry.py            # Agent/Tool æ³¨å†Œè¡¨
â”‚   â”‚   â”‚   â”‚
â”‚   â”‚   â”‚   â”œâ”€â”€ enterprise_resolver/   # Agent: ä¼ä¸šä¸»ä½“è¯†åˆ«
â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ __init__.py
â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ config.yaml        # Agent é…ç½®
â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ prompts.py         # æç¤ºè¯
â”‚   â”‚   â”‚   â”‚   â””â”€â”€ handler.py         # ä¸šåŠ¡é€»è¾‘
â”‚   â”‚   â”‚   â”‚
â”‚   â”‚   â”‚   â”œâ”€â”€ kechuang_evaluator/    # Agent: ç§‘åˆ›è¯„ä»·
â”‚   â”‚   â”‚   â”‚   â””â”€â”€ ...
â”‚   â”‚   â”‚   â”‚
â”‚   â”‚   â”‚   â””â”€â”€ _template/             # Agent å¼€å‘æ¨¡æ¿
â”‚   â”‚   â”‚       â””â”€â”€ ...
â”‚   â”‚   â”‚
â”‚   â”‚   â”œâ”€â”€ adapters/                  # ğŸ†• å¤–éƒ¨æœåŠ¡é€‚é…å™¨
â”‚   â”‚   â”‚   â”œâ”€â”€ __init__.py
â”‚   â”‚   â”‚   â”œâ”€â”€ base.py                # é€‚é…å™¨åŸºç±»
â”‚   â”‚   â”‚   â”œâ”€â”€ data_warehouse.py      # æ•°ä»“é€‚é…å™¨
â”‚   â”‚   â”‚   â”œâ”€â”€ model_factory.py       # æ¨¡å‹å·¥å‚é€‚é…å™¨
â”‚   â”‚   â”‚   â””â”€â”€ external_api.py        # å¤–éƒ¨ API é€‚é…å™¨
â”‚   â”‚   â”‚
â”‚   â”‚   â””â”€â”€ utils/                     # å·¥å…·å‡½æ•°
â”‚   â”‚       â””â”€â”€ ...
â”‚   â”‚
â”‚   â”œâ”€â”€ alembic/                       # æ•°æ®åº“è¿ç§»ï¼ˆä¿ç•™ï¼‰
â”‚   â”œâ”€â”€ tests/                         # æµ‹è¯•
â”‚   â””â”€â”€ pyproject.toml
â”‚
â”œâ”€â”€ frontend/                          # React å‰ç«¯
â”‚   â”œâ”€â”€ src/
â”‚   â”‚   â”œâ”€â”€ main.tsx                   # å…¥å£
â”‚   â”‚   â”œâ”€â”€ index.css                  # å…¨å±€æ ·å¼
â”‚   â”‚   â”‚
â”‚   â”‚   â”œâ”€â”€ routes/                    # é¡µé¢è·¯ç”±
â”‚   â”‚   â”‚   â”œâ”€â”€ __root.tsx
â”‚   â”‚   â”‚   â”œâ”€â”€ _layout.tsx
â”‚   â”‚   â”‚   â”œâ”€â”€ login.tsx              # ç™»å½•ï¼ˆä¿ç•™ï¼‰
â”‚   â”‚   â”‚   â””â”€â”€ _layout/
â”‚   â”‚   â”‚       â”œâ”€â”€ index.tsx          # ğŸ†• ä¸»å¯¹è¯ç•Œé¢
â”‚   â”‚   â”‚       â”œâ”€â”€ agents.tsx         # ğŸ†• Agent ç®¡ç†
â”‚   â”‚   â”‚       â”œâ”€â”€ tasks.tsx          # ğŸ†• ä»»åŠ¡ä¸­å¿ƒ
â”‚   â”‚   â”‚       â””â”€â”€ settings.tsx       # è®¾ç½®
â”‚   â”‚   â”‚
â”‚   â”‚   â”œâ”€â”€ components/
â”‚   â”‚   â”‚   â”œâ”€â”€ ui/                    # åŸºç¡€ UI ç»„ä»¶ï¼ˆä¿ç•™ï¼‰
â”‚   â”‚   â”‚   â”‚   â””â”€â”€ ...
â”‚   â”‚   â”‚   â”‚
â”‚   â”‚   â”‚   â”œâ”€â”€ Chat/                  # ğŸ†• å¯¹è¯ç•Œé¢ç»„ä»¶
â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ ChatContainer.tsx  # å¯¹è¯å®¹å™¨
â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ MessageList.tsx    # æ¶ˆæ¯åˆ—è¡¨
â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ InputBox.tsx       # è¾“å…¥æ¡†
â”‚   â”‚   â”‚   â”‚   â””â”€â”€ AgentCards.tsx     # Agent å¿«æ·å¡ç‰‡
â”‚   â”‚   â”‚   â”‚
â”‚   â”‚   â”‚   â”œâ”€â”€ ThinkingChain/         # ğŸ†• æ€ç»´é“¾ç»„ä»¶
â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ ThinkingPanel.tsx  # æ€ç»´é“¾é¢æ¿
â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ TaskProgress.tsx   # ä»»åŠ¡è¿›åº¦
â”‚   â”‚   â”‚   â”‚   â””â”€â”€ ExecutionDetail.tsx # æ‰§è¡Œè¯¦æƒ…
â”‚   â”‚   â”‚   â”‚
â”‚   â”‚   â”‚   â”œâ”€â”€ DynamicComponents/     # ğŸ†• åŠ¨æ€æ¸²æŸ“ç»„ä»¶
â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ ComponentRenderer.tsx  # ç»„ä»¶æ¸²æŸ“å™¨
â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ EntityCard.tsx     # ä¼ä¸šå¡ç‰‡
â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ DataTable.tsx      # æ•°æ®è¡¨æ ¼
â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ ScoreCard.tsx      # è¯„åˆ†å¡ç‰‡
â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ RelationGraph.tsx  # å…³ç³»å›¾è°±
â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ CandidateList.tsx  # å€™é€‰é€‰æ‹©ï¼ˆåé—®ï¼‰
â”‚   â”‚   â”‚   â”‚   â””â”€â”€ index.ts           # ç»„ä»¶æ³¨å†Œè¡¨
â”‚   â”‚   â”‚   â”‚
â”‚   â”‚   â”‚   â”œâ”€â”€ Sidebar/               # ä¾§è¾¹æ ï¼ˆæ”¹é€ ï¼‰
â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ Sidebar.tsx
â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ AgentList.tsx      # Agent åˆ—è¡¨
â”‚   â”‚   â”‚   â”‚   â””â”€â”€ ConversationList.tsx # å†å²å¯¹è¯
â”‚   â”‚   â”‚   â”‚
â”‚   â”‚   â”‚   â””â”€â”€ Admin/                 # ç®¡ç†åå°
â”‚   â”‚   â”‚       â”œâ”€â”€ AgentEditor.tsx    # ğŸ†• Agent ç¼–è¾‘å™¨
â”‚   â”‚   â”‚       â””â”€â”€ ...
â”‚   â”‚   â”‚
â”‚   â”‚   â”œâ”€â”€ hooks/                     # è‡ªå®šä¹‰ Hooks
â”‚   â”‚   â”‚   â”œâ”€â”€ useSSE.ts              # ğŸ†• SSE é€šä¿¡
â”‚   â”‚   â”‚   â”œâ”€â”€ useAgent.ts            # ğŸ†• Agent äº¤äº’
â”‚   â”‚   â”‚   â””â”€â”€ useAuth.ts             # è®¤è¯ï¼ˆä¿ç•™ï¼‰
â”‚   â”‚   â”‚
â”‚   â”‚   â”œâ”€â”€ stores/                    # ğŸ†• çŠ¶æ€ç®¡ç†
â”‚   â”‚   â”‚   â”œâ”€â”€ chatStore.ts           # å¯¹è¯çŠ¶æ€
â”‚   â”‚   â”‚   â””â”€â”€ agentStore.ts          # Agent çŠ¶æ€
â”‚   â”‚   â”‚
â”‚   â”‚   â””â”€â”€ lib/                       # å·¥å…·åº“
â”‚   â”‚       â””â”€â”€ ...
â”‚   â”‚
â”‚   â”œâ”€â”€ public/
â”‚   â””â”€â”€ package.json
â”‚
â””â”€â”€ docs/                              # æ–‡æ¡£
    â”œâ”€â”€ architecture.md                # æ¶æ„è¯´æ˜
    â””â”€â”€ agent-development.md           # Agent å¼€å‘æŒ‡å—
```

### 12.2 æ¨¡å—ä¿ç•™/åˆ é™¤è§„åˆ’

| åŸæ¨¡å— | å¤„ç† | è¯´æ˜ |
|-------|------|------|
| **åç«¯** | | |
| `api/routes/login.py` | âœ… ç®€åŒ–ä¿ç•™ | æ”¹åä¸º `auth.py` |
| `api/routes/users.py` | âœ… ä¿ç•™ | ç”¨æˆ·ç®¡ç† |
| `api/routes/items.py` | âŒ åˆ é™¤ | ç¤ºä¾‹ä»£ç ï¼Œä¸éœ€è¦ |
| `core/` | âœ… ä¿ç•™ | æ ¸å¿ƒé…ç½® |
| `models.py` | âœ… æ‹†åˆ†æ”¹é€  | æ‹†åˆ†ä¸ºå¤šä¸ªæ¨¡å‹æ–‡ä»¶ |
| `crud.py` | âš ï¸ æ”¹é€  | æŒ‰æ¨¡å‹æ‹†åˆ† |
| `email-templates/` | âš ï¸ å¯é€‰ä¿ç•™ | æš‚æ—¶ä¿ç•™ |
| **å‰ç«¯** | | |
| `components/Admin/` | âš ï¸ æ”¹é€  | æ”¹ä¸º Agent ç®¡ç† |
| `components/Items/` | âŒ åˆ é™¤ | ç¤ºä¾‹ä»£ç  |
| `components/Common/` | âœ… ä¿ç•™ | é€šç”¨ç»„ä»¶ |
| `components/ui/` | âœ… ä¿ç•™ | åŸºç¡€ UI |
| `routes/_layout/` | âš ï¸ æ”¹é€  | æ”¹ä¸ºå¯¹è¯ç•Œé¢ |

### 12.3 å€Ÿé‰´çš„è®¾è®¡æ¨¡å¼

| æ¥æº | å€Ÿé‰´ç‚¹ | ä½“ç°ä½ç½® |
|------|-------|---------|
| **Manus** | äº”å±‚æ¶æ„ï¼ˆè§„åˆ’/æ‰§è¡Œ/éªŒè¯/è®°å¿†/å·¥å…·å±‚ï¼‰ | `engine/` ç›®å½• |
| **Manus** | æµå¼ä»»åŠ¡å±•ç¤º | å‰ç«¯ `ThinkingChain/` |
| **JoyAgent** | Multi-level Thinking | `planner.py` |
| **JoyAgent** | Agent ç‹¬ç«‹ç›®å½•ç»“æ„ | `agents/` ç›®å½• |
| **OpenManus** | `@register_tool` è£…é¥°å™¨ | `registry.py` |
| **LangGraph** | çŠ¶æ€å›¾ç¼–æ’ | `graph.py` |


